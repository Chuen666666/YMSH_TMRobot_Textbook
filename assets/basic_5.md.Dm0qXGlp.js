import{_ as a,c as d,o as t,aj as c}from"./chunks/framework.CjkNaYQl.js";const i="/YMSH_TMRobot_Textbook/base_icon.jpg",r="/YMSH_TMRobot_Textbook/quick_control_icon.jpg",o="/YMSH_TMRobot_Textbook/add_icon.jpg",n="/YMSH_TMRobot_Textbook/save_icon.jpg",q=JSON.parse('{"title":"5. 軟體基礎篇","description":"","frontmatter":{},"headers":[],"relativePath":"basic/5.md","filePath":"basic/5.md"}'),l={name:"basic/5.md"};function s(h,e,p,b,m,u){return t(),d("div",null,[...e[0]||(e[0]=[c('<h1 id="_5-軟體基礎篇" tabindex="-1">5. 軟體基礎篇 <a class="header-anchor" href="#_5-軟體基礎篇" aria-label="Permalink to &quot;5. 軟體基礎篇&quot;">​</a></h1><h2 id="介紹" tabindex="-1">介紹 <a class="header-anchor" href="#介紹" aria-label="Permalink to &quot;介紹&quot;">​</a></h2><p>專案的編寫是採取「畫流程圖」式的圖形化編輯，只需要先點擊流程節點，再拉由左側拉入其他流程節點（或點擊手臂上特定按鈕產生流程節點），被加入的流程節點就會自動接到原先選取的流程節點下方。也可以透過點擊節點下方的 <code>×</code> 按鈕來斷開與下方連接的節點，或手動拉出連接線來連接兩個節點。</p><h2 id="坐標系-base" tabindex="-1">坐標系（Base） <a class="header-anchor" href="#坐標系-base" aria-label="Permalink to &quot;坐標系（Base）&quot;">​</a></h2><p>常用的坐標系一共以下種：</p><ul><li>機械坐標系（Robot Base）：有「絕對位置」的概念，任何時候它的坐標都必然表示同樣位置</li><li>視覺坐標系（Vision Base）：有「相對位置」的概念，每次建立視覺任務後就會自動建立，會隨辨識到的物體位置而改變原點</li><li>工具坐標系：一般來說只會在使用 <code>Move</code> 時會用到，它以法蘭中心為原點，故正常情況下 Z 軸會與 Robot Base 相反（無法單獨在專案頁新建此種坐標系）</li></ul><p>要改變採用的坐標系也很簡單，到右上角下拉式選單即可變更。</p><p><img src="'+i+'" alt="常見坐標系"></p><blockquote><p>常見的坐標系，其中一般坐標系（中間的）不在此教材之介紹範圍</p></blockquote><h2 id="移動手臂" tabindex="-1">移動手臂 <a class="header-anchor" href="#移動手臂" aria-label="Permalink to &quot;移動手臂&quot;">​</a></h2><p>直接按住手臂上的 <code>FREE</code> 按鈕，就可以直接拉動手臂，將它調到想要的位置了。</p><p>若想更細致地操作手臂，則點進上方 <img src="'+r+'" alt="Quick Control 圖標" style="width:25px;display:inline;vertical-align:middle;margin:0 5px;"> 使用控制器的 <code>+</code> 和 <code>-</code> 進行微調。</p><h2 id="point" tabindex="-1">Point <a class="header-anchor" href="#point" aria-label="Permalink to &quot;Point&quot;">​</a></h2><p>在移動到想要的位置後，先確認右上角的坐標是否為自己想要的坐標系後，直接點擊手臂上 <code>Point</code> 按鈕或在軟體中拉入一個 <code>Point</code>，即可直接記錄目前坐標位置。</p><p>可以點擊節點左上角的鉛筆圖標，進入編輯畫面，之後將 </p><h2 id="vision" tabindex="-1">Vision <a class="header-anchor" href="#vision" aria-label="Permalink to &quot;Vision&quot;">​</a></h2><h3 id="概念" tabindex="-1">概念 <a class="header-anchor" href="#概念" aria-label="Permalink to &quot;概念&quot;">​</a></h3><p><code>Vision</code> 分為兩大類型：</p><table tabindex="0"><thead><tr><th style="text-align:center;"></th><th style="text-align:center;">Positioning</th><th style="text-align:center;">Inspection</th></tr></thead><tbody><tr><td style="text-align:center;">可編輯任務</td><td style="text-align:center;">物件定位、TM Landmark 定位、伺服式定位、<br>物件校正、Smart-Pick</td><td style="text-align:center;">AOI 辨識與視覺 I/O 觸發</td></tr><tr><td style="text-align:center;">是否建立新坐標系</td><td style="text-align:center;">是</td><td style="text-align:center;">否</td></tr></tbody></table><div class="warning custom-block"><p class="custom-block-title">注意事項</p><p><code>Vision</code>（Positioning）任務執行時也有 <code>Point</code> 功能，亦即會定位到指定位置後才開始視覺辨識，故建立 <code>Vision</code> 前須先檢查坐標系是否正確（通常使用 Robot Base）</p></div><h3 id="操作方式" tabindex="-1">操作方式 <a class="header-anchor" href="#操作方式" aria-label="Permalink to &quot;操作方式&quot;">​</a></h3><p>初階課程我們以<strong>物件定位</strong>和 <strong>Landmark</strong> 為主，來帶大家認識 <code>Vision</code>。</p><p>無論是物件定位還是 Landmark，都會用 <code>Positioning</code> 的 <code>Vision</code> 節點，因此要先移動手臂到合適位置後，再拉 <code>Vision</code> 節點。拉入後，點擊它左上角的，進入編輯畫面後，點擊 <code>視覺任務</code> 旁的 <code>選擇</code> 以開啟，點擊 <img src="'+o+'" alt="創建視覺任務圖標" style="width:25px;display:inline;vertical-align:middle;margin:0 5px;"> 以創建一個新視覺任務，隨便起一個名後，即可進入視覺任務的編輯畫面。進入後，確認左側選的是 <code>Eye-in-Hand</code> 並點擊 <code>設定</code>，即可依下方步驟完成物件定位或 Landmark 的視覺任務設定。</p><h4 id="物件定位" tabindex="-1">物件定位 <a class="header-anchor" href="#物件定位" aria-label="Permalink to &quot;物件定位&quot;">​</a></h4><p>點擊 <code>物件定位</code> → <code>下一步</code>，等它跑完後，就會進到物件定位的編輯流程，左側那幾個方塊就是它的辨識流程，只要照著它的順序逐一設定好即可，記憶上應該不困難。</p><p>在第一個方塊（<code>Motion</code>）中，點擊右側 <code>設定工作平面</code> → <code>建立</code> → <code>是</code>，即可進入工作平面的設定介面，在 <code>視覺應用選擇</code> 頁面選擇 <code>自動</code> → <code>下一步</code>，接著把<strong>校正板</strong>放到鏡頭可以清楚辨識處（建議可以在下方用兩到三塊<strong>麻將</strong>墊著，讓<strong>校正板</strong>保持水平），按下 <code>Next</code> 後，依畫面指示按住控制器上的 <code>PLAY</code> 按鈕，手臂會開自動校正，跑到下方進度條全滿且指示消失後，會跳出「校正已完成」視窗，點擊 <code>確定</code>，之後在 <code>工作平面名稱</code> 處為工作平面隨便取個名字，即可點擊 <code>Save</code> → <code>確定</code> 儲存。完成此步後，<strong>校正板</strong>就可以拿走了。</p><p>接著點擊右側 <code>Camera</code> 流程塊，建議可以勾選 <code>內建光源</code> 選項，它會自動在視覺任務時開燈，並在完成辨識後關燈，啟用此選項可以減少環境造成辨識失敗的機率。點擊 <code>自動調整相機參數</code>，就完成了這一步的設定。</p><p>當選著 <code>Camera</code> 流程塊時，它下方會出現一個 <img src="'+o+'" alt="新增流程節點圖示" style="width:25px;display:inline;vertical-align:middle;margin:0 5px;">，點擊它後，在 <code>Find</code> 類別中找到 <code>樣板對比（輪廓特徵）</code>，選取它，並點擊 <code>確定</code>。此時需在畫面中放置<strong>一個麻將</strong>，建議擺正，以利後續選取樣板的方便。選擇右側 <code>選擇樣板</code>，它會開啟一個樣板選擇視窗，可以用滑鼠拉出一個長方形方塊去框住<strong>麻將</strong>的「<strong>TM</strong>」Logo（建議不要選取到下方小字或上方 QR Code），選好後點擊 <code>下一步</code>，待它跑完後，會跳出一個 <code>選擇樣板</code> 視窗，圖中會列出三種選取方式，選擇一個你認為框選得最精準的樣板，並點擊 <code>確定</code>，即完成此步設定。注意，在建立好視覺任務後到真的去夾它之前，麻將都不能再移動位置了，否則要重新建立任務。</p><p>點擊左上角的 <img src="'+n+'" alt="存檔圖示" style="width:25px;display:inline;vertical-align:middle;margin:0 5px;"> → <code>儲存</code> → <code>是</code> 以儲存此視覺任務。最後再點擊 <code>是</code> → <code>設定</code> → <code>確認</code>，跳出視覺任務設定頁，即完成。</p><h4 id="landmark" tabindex="-1">Landmark <a class="header-anchor" href="#landmark" aria-label="Permalink to &quot;Landmark&quot;">​</a></h4><h3 id="辨識失敗時的-case" tabindex="-1">辨識失敗時的 Case <a class="header-anchor" href="#辨識失敗時的-case" aria-label="Permalink to &quot;辨識失敗時的 Case&quot;">​</a></h3><p>視覺任務建立後，該節點下方會出現 <code>Found</code> 和 <code>Miss</code> 兩個分支，分別對應於「有辨識到物件」和「辨識失敗」兩種情況，前者很好理解，辨識成功就繼續寫接下來要幹嘛就好，但失敗的情況呢？處理失敗的情況，最常見的做法就是讓它不斷辨識，直到成功為止。</p><p>具體的做法是，我們要使用 <code>Goto</code> 節點，我們可以在選取 <code>Vision</code> 節點的情況下，拉入 <code>Goto</code> 節點，並選擇 <code>遺失路徑</code>，就能把 <code>Goto</code> 接在 <code>Miss</code> 分支下方，之後，我們再點 <code>Goto</code> 左上角的鉛筆圖示以進入編輯畫面，再點擊 <code>Set Goto Target</code>，此時畫面會變灰，並把所有節點高亮顯示，點擊一下 <code>Vision</code> 節點 → <code>確認</code>，即可將 <code>Goto</code> 節點拉回到 <code>Vision</code> 節點上。如此，之後在辨識失敗時，它就會一直執行辨識，直到找到目標。</p><div class="info custom-block"><p class="custom-block-title">夾放流程提示</p><p>前面說過 <code>Vision</code> 會建立新坐標系，因此要控制夾起或放下麻將時，只要在建好 <code>Vision</code> 後，讓 <code>Point</code> 去採用 <code>Vision Base</code>，就可以精準地控制手臂把麻將夾或放到某處</p></div><h2 id="set" tabindex="-1">Set <a class="header-anchor" href="#set" aria-label="Permalink to &quot;Set&quot;">​</a></h2><p><code>Set</code> 的功能相當強大，不過本章只會講解如何用它來控制夾抓的開闔。</p><h3 id="建立" tabindex="-1">建立 <a class="header-anchor" href="#建立" aria-label="Permalink to &quot;建立&quot;">​</a></h3><p><code>Set</code> 可以從軟體左側拉入，或用手臂上的 <code>SET</code> 鈕（但競賽有可能會鎖住此方法）來建立。</p><h3 id="設置" tabindex="-1">設置 <a class="header-anchor" href="#設置" aria-label="Permalink to &quot;設置&quot;">​</a></h3><p>為了控制手臂夾抓的開闔，我們要進到 <code>Set</code> 的 <code>數位輸出</code> 設定，點擊它右邊的 <code>選擇</code>，並在右邊跳出來的視窗中，找到 <code>末端模組</code> 的 <code>DO_0</code>，這一項就是我們要控制的夾抓狀態。</p><p><code>DO_0</code> 右邊有個圓形，點擊後，它會在 <code>H</code>、<code>L</code>、<strong>空白</strong>這三種狀態循環，<code>H</code> 表示「<strong>夾</strong>」、<code>L</code> 表示「<strong>放</strong>」，相當直觀。</p><h2 id="waitfor" tabindex="-1">WaitFor <a class="header-anchor" href="#waitfor" aria-label="Permalink to &quot;WaitFor&quot;">​</a></h2><p>其實 <code>WaitFor</code> 可以被用來等待<strong>輸出入、時間、變數</strong>等條件，不過本章節只會說明最常使用的用途——等待時間。</p><h3 id="用途" tabindex="-1">用途 <a class="header-anchor" href="#用途" aria-label="Permalink to &quot;用途&quot;">​</a></h3><p>以初階應用來說，它很常被用在操作完夾抓收放後。因為「夾」和「放」的操作本身是需要時間的，但在專案執行速度拉快時，它有機會會因為太快而導致「空夾」或「拋放」，為了讓夾子確實完成收放動作後，才去執行下一個動作，我們就要在夾放操作後，加上一個 <code>WaitFor</code>。</p><h3 id="操作方式-1" tabindex="-1">操作方式 <a class="header-anchor" href="#操作方式-1" aria-label="Permalink to &quot;操作方式&quot;">​</a></h3><p>在編輯 <code>WaitFor</code> 介面中，選擇 <code>時間</code> 右邊的 <code>選擇</code>，在右邊跳出來的視窗中，選擇上面那個選項（有框可輸入數值的選項，理論上為預設值），並在框中輸入要等待的時間，一般建議可以寫 <code>500</code>（代表 500 ms，即 0.5 sec）。</p><h2 id="move" tabindex="-1">Move <a class="header-anchor" href="#move" aria-label="Permalink to &quot;Move&quot;">​</a></h2><h3 id="用途-1" tabindex="-1">用途 <a class="header-anchor" href="#用途-1" aria-label="Permalink to &quot;用途&quot;">​</a></h3><p>通常我們會在操作完夾抓的收放後，為了避免移動到下一個點位的路徑上有東西，從而導致撞機，我們會用 <code>Move</code> 來先把手臂向上抬高一些。</p><h3 id="操作方式-2" tabindex="-1">操作方式 <a class="header-anchor" href="#操作方式-2" aria-label="Permalink to &quot;操作方式&quot;">​</a></h3><p>一般來說我們會用「工具」，也就是<strong>工具坐標系</strong>的方式來進行移動，「向上抬升」本質上就是工具坐標系的 Z 軸上升，我們習慣抬升 10 cm，不過要注意它的單位是「mm（毫公分）」，故應輸入 <code>100</code>。</p><h2 id="stop" tabindex="-1">Stop <a class="header-anchor" href="#stop" aria-label="Permalink to &quot;Stop&quot;">​</a></h2><p>它屬於一個停止節點，會接在專案最後面，讓專案在執行到它時，自動退出專案介面。<code>Stop</code> 節點因為代表的是「結束」，故它下方無法再連接其他節點。雖然這個節點不是硬性規定，但還是推薦養成好習慣，在專案最後面都加上一個 <code>Stop</code>。</p><h2 id="執行專案" tabindex="-1">執行專案 <a class="header-anchor" href="#執行專案" aria-label="Permalink to &quot;執行專案&quot;">​</a></h2><h3 id="開始執行" tabindex="-1">開始執行 <a class="header-anchor" href="#開始執行" aria-label="Permalink to &quot;開始執行&quot;">​</a></h3><p>點擊控制器上的 <code>PLAY</code> 按鈕，畫面就會進入執行專案的頁面，並伴隨三聲「嗶、嗶、嗶」後，隨即開始執行專案。</p><h3 id="控制速度" tabindex="-1">控制速度 <a class="header-anchor" href="#控制速度" aria-label="Permalink to &quot;控制速度&quot;">​</a></h3><p>在控制器下方會有一排燈號用以顯示目前的專案執行速度，預設是 <code>5%</code>，可以利用控制器的 <code>+</code> 和 <code>-</code> 來控制專案執行速度，新手使用時一般建議設置在 <code>15%</code> 以下，待熟悉手臂操作後再漸漸增加上限。</p><h3 id="退回控制器" tabindex="-1">退回控制器 <a class="header-anchor" href="#退回控制器" aria-label="Permalink to &quot;退回控制器&quot;">​</a></h3><p>在執行完畢後，若沒有設置 <code>Stop</code> 節點，則軟體畫面會停在專案執行畫面，若欲退回專案編輯畫面，可以按下控制器的 <code>STOP</code> 按鈕來退出執行畫面。</p><p>另一種情況是，專案沒有執行完成，無論是因為報錯停下，或是卡在某步無限迴圈了（例如迴圈設錯或視覺任務無法找到目標而卡住等），都一樣可以利用控制器的 <code>STOP</code> 鈕來停止並退出執行。</p><h2 id="常見報錯" tabindex="-1">常見報錯 <a class="header-anchor" href="#常見報錯" aria-label="Permalink to &quot;常見報錯&quot;">​</a></h2><h3 id="原因和特徵" tabindex="-1">原因和特徵 <a class="header-anchor" href="#原因和特徵" aria-label="Permalink to &quot;原因和特徵&quot;">​</a></h3><p>手臂可能會因為撞到東西（撞機）或者在拉到某個關節的極限（奇異點）時報錯，此時手臂上的燈會呈紅色，且軟體顯示灰色，無法操作。</p><h3 id="解除方式" tabindex="-1">解除方式 <a class="header-anchor" href="#解除方式" aria-label="Permalink to &quot;解除方式&quot;">​</a></h3><ol><li>按住手臂上 <code>FREE</code> 按鈕後，直接移動它離開原位（撞擊物或奇異點）</li><li>長按控制器上 <code>STOP</code> 按鈕後，方可解除報錯狀態</li><li>重新檢視並修改專案，確認報錯原因並進行修正</li></ol>',67)])])}const x=a(l,[["render",s]]);export{q as __pageData,x as default};
